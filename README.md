# GCA-Sim
Official code and materials for: “A Framework Based on Graph Cellular Automata for Similarity Evaluation in Urban Spatial Networks.” 

## Workflow

- Download the entire package and ensure the environment satisfies the requirements listed in `requirements`.  
- Run all scripts from the package root directory.

## 1. Data Preparation

### 1.1 OSM Network Download

The download lists required for different operations are grouped under `\0data\meta`. You can:
- use `\1prep\osmfetch.py` to fetch each road network directly from OSM, or
- download the needed data manually from the **[URL](https://github.com/PeiruWu0096/GCA-Sim/releases/tag/v0.1.0)** and place the files in the corresponding locations.

**Note:** If you downloaded the data from Releases, unzip it and replace the `\0data\meta` folder. Because downloading via code may often fail, it is recommended to directly use the compressed package from the Releases.

### 1.2 Precomputation

After obtaining the network data, run `\1prep\precompute.py` to perform precomputation. This script scans all `graphml` folders under the specified path and creates a `pre` folder with the same internal structure to store precomputed files.  
Currently, the **node state** used for precomputation is **degree**. **Spatial information** is computed on **node pairs**, including (i) neighbor-normalized distance and (ii) the angle between the left and right adjacent edges around a given edge, normalized by **360°**.

## 2. Training

If you only want to verify the performance of the submodels obtained in this study, you can skip directly to **Section 3**.

If you want to fully reproduce the experimental process, make sure you have downloaded the complete **training** and **validation** sets and finished **precomputation**. Then run `\2train\train.py`.

## 3. Model Evaluation

You can use the scripts under `\3eval` to test each model. The analysis set includes **city-** and **district-level** scales; the **default path is set to district-level**.

- `\3eval\gcasim.py` is the evaluation script for **GCA-Sim**. The submodel used here is set to the **best-performing** submodel from our experiments. Other submodels obtained in this study are stored under `\0data\output\artifacts`.
- You can also use the submodels generated by **your own training**, which are saved under `\0data\output\trainsave`. You may supply the `.pt` files saved during training or the final `final_model_hard.pt` as input.

## 4. Other Tools

Some research utilities unrelated to the main workflow are placed under `\4tools`. For example, `simplify.py` generates initial visualization files of the **differentiable logic-gate** networks.
